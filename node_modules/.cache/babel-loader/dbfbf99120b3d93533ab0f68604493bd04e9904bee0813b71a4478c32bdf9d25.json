{"ast":null,"code":"/**\n * Sistema de IA para Triagem M√©dica\n * Baseado no Sistema Manchester de Classifica√ß√£o de Risco\n * 5 n√≠veis de prioridade conforme protocolo hospitalar\n */\n\n// Defini√ß√£o dos n√≠veis de prioridade\nexport const NIVEIS_PRIORIDADE = {\n  VERMELHO: {\n    cor: 'vermelho',\n    significado: 'Emerg√™ncia absoluta',\n    tempo: 'Imediato',\n    tempoEstimado: '00:00',\n    exemplo: 'Parada card√≠aca, falta de ar grave, sangramento intenso, perda de consci√™ncia',\n    peso: 5\n  },\n  LARANJA: {\n    cor: 'laranja',\n    significado: 'Muito urgente',\n    tempo: 'At√© 10 min',\n    tempoEstimado: '10:00',\n    exemplo: 'Dor no peito forte, AVC em andamento, fratura exposta, queimadura grave',\n    peso: 4\n  },\n  AMARELO: {\n    cor: 'amarelo',\n    significado: 'Urgente moderado',\n    tempo: 'At√© 50 min',\n    tempoEstimado: '50:00',\n    exemplo: 'Febre alta com mal-estar, dor intensa mas est√°vel, pequenos cortes com sangramento controlado',\n    peso: 3\n  },\n  VERDE: {\n    cor: 'verde',\n    significado: 'Pouco urgente',\n    tempo: 'At√© 2 horas',\n    tempoEstimado: '120:00',\n    exemplo: 'Dor leve, sintomas gripais, pequenas tor√ß√µes',\n    peso: 2\n  },\n  AZUL: {\n    cor: 'azul',\n    significado: 'N√£o urgente',\n    tempo: 'At√© 4 horas',\n    tempoEstimado: '240:00',\n    exemplo: 'Pedido de receita, curativo simples, consulta de acompanhamento',\n    peso: 1\n  }\n};\n\n// Palavras-chave categorizadas por n√≠vel de emerg√™ncia\nconst PALAVRAS_CHAVE = {\n  // VERMELHO - Emerg√™ncia absoluta\n  vermelho: [\n  // Cardiovascular cr√≠tico\n  'parada card√≠aca', 'infarto', 'infarto agudo', 'dor no peito irradiando', 'dor no bra√ßo esquerdo', 'press√£o no peito', 'aperto no peito', 'queima√ß√£o no peito forte',\n  // Respirat√≥rio cr√≠tico\n  'falta de ar grave', 'n√£o consigo respirar', 'sufocando', 'cianose', 'l√°bios roxos', 'chiado forte', 'respira√ß√£o dif√≠cil', 'engasgando',\n  // Neurol√≥gico cr√≠tico\n  'desmaio', 'desmaiou', 'perda de consci√™ncia', 'inconsciente', 'convuls√£o', 'confus√£o mental severa', 'n√£o responde', 'avc', 'derrame',\n  // Sangramento grave\n  'sangramento intenso', 'muito sangue', 'hemorragia', 'sangue n√£o para', 'vomitando sangue', 'sangue na urina escuro', 'sangue nas fezes escuro',\n  // Trauma grave\n  'acidente grave', 'atropelado', 'quedou de altura', 'fratura exposta', 'osso aparecendo', 'traumatismo craniano', 'cabe√ßa bateu forte',\n  // Intoxica√ß√£o\n  'envenenamento', 'intoxica√ß√£o', 'overdose', 'tomei muitos rem√©dios',\n  // Queimaduras graves\n  'queimadura extensa', 'queimou muito', 'queimadura qu√≠mica',\n  // Pedi√°trico cr√≠tico\n  'beb√™ n√£o responde', 'crian√ßa azul', 'febre muito alta beb√™'],\n  // LARANJA - Muito urgente\n  laranja: [\n  // Dor intensa\n  'dor no peito', 'dor forte peito', 'dor intensa', 'dor insuport√°vel', 'dor 8', 'dor 9', 'dor 10', 'dor muito forte',\n  // Neurol√≥gico urgente\n  'dor de cabe√ßa forte', 'enxaqueca severa', 'vis√£o emba√ßada s√∫bita', 'formigamento', 'dorm√™ncia s√∫bita', 'tontura forte',\n  // Respirat√≥rio urgente\n  'falta de ar', 'cansa√ßo para respirar', 'chiado no peito', 'tosse com sangue', 'escarro com sangue',\n  // Gastrointestinal urgente\n  'dor abdominal forte', 'v√¥mito com sangue', 'dor barriga intensa', 'n√£o consigo urinar', 'muita dor urinar',\n  // Trauma ortop√©dico - CORRIGIDO\n  'fratura', 'osso quebrado', 'quebrou', 'quebrada', 'quebrado', 'osso quebrou', 'perna quebrada', 'bra√ßo quebrado', 'm√£o quebrada', 'p√© quebrado', 'tornozelo quebrado', 'pulso quebrado', 'costela quebrada', 'tor√ß√£o grave', 'luxa√ß√£o', 'deslocamento', 'osso saiu do lugar', 'corte profundo', 'sangramento moderado', 'machucado grave', 'acidente de moto', 'acidente de carro', 'queda de altura', 'n√£o consigo movimentar', 'n√£o consigo andar', 'n√£o consigo mexer',\n  // Infec√ß√£o grave\n  'febre alta', 'febre 39', 'febre 40', 'calafrios intensos', 'infec√ß√£o grave', 'vermelhid√£o espalhando',\n  // Oftalmol√≥gico urgente\n  'dor no olho forte', 'perda de vis√£o s√∫bita', 'objeto no olho'],\n  // AMARELO - Urgente moderado\n  amarelo: [\n  // Dor moderada\n  'dor moderada', 'dor 5', 'dor 6', 'dor 7', 'dor que incomoda', 'dor nas costas forte', 'dor muscular intensa',\n  // Gastrointestinal\n  'v√¥mito', 'vomitando', 'n√°usea forte', 'diarreia', 'dor de barriga', 'azia forte', 'queima√ß√£o est√¥mago',\n  // Respirat√≥rio moderado\n  'tosse persistente', 'tosse seca forte', 'garganta muito dolorida',\n  // Febre\n  'febre', 'febril', 'temperatura alta', 'calafrios',\n  // Urin√°rio\n  'dor para urinar', 'sangue na urina', 'n√£o consegue urinar bem',\n  // Dermatol√≥gico\n  'coceira intensa', 'alergia na pele', 'incha√ßo', 'vermelhid√£o',\n  // Ortop√©dico moderado\n  'tor√ß√£o', 'entorse', 'dor articular forte', 'machucado', 'machucou', 'bati a perna', 'bati o bra√ßo', 'ca√≠', 'cai', 'queda', 'trope√ßou', 'perna doendo muito', 'bra√ßo doendo muito', 'incha√ßo grande', 'roxo', 'hematoma', 'n√£o consigo apoiar', 'mancando'],\n  // VERDE - Pouco urgente\n  verde: [\n  // Dor leve\n  'dor leve', 'dor 3', 'dor 4', 'desconforto', 'inc√¥modo',\n  // Sintomas gripais\n  'gripe', 'resfriado', 'coriza', 'espirro', 'tosse leve', 'garganta dolorida', 'mal estar',\n  // Gastrointestinal leve\n  'azia', 'queima√ß√£o leve', 'gases', 'pris√£o de ventre',\n  // Dermatol√≥gico leve\n  'coceira', 'mancha na pele', 'espinha', 'caspa',\n  // Ortop√©dico leve\n  'dor nas costas leve', 'tens√£o muscular', 'cansa√ßo'],\n  // AZUL - N√£o urgente\n  azul: [\n  // Administrativo\n  'receita', 'atestado', 'exame de rotina', 'consulta agendada', 'acompanhamento', 'resultado de exame',\n  // Preven√ß√£o\n  'vacina', 'check-up', 'preven√ß√£o', 'orienta√ß√£o',\n  // Sintomas muito leves\n  'dor 1', 'dor 2', 'dor muito leve', 'leve desconforto']\n};\n\n// Modificadores que podem alterar a prioridade\nconst MODIFICADORES = {\n  // Aumentam urg√™ncia\n  idade_critica: ['beb√™', 'rec√©m-nascido', 'idoso', 'gestante', 'gr√°vida'],\n  tempo_critico: ['s√∫bito', 'repentino', 'agora', 'de repente', 'come√ßou agora'],\n  intensidade: ['muito', 'extremamente', 'insuport√°vel', 'terr√≠vel', 'horr√≠vel'],\n  // Diminuem urg√™ncia\n  cronico: ['sempre', 'h√° muito tempo', 'cr√¥nico', 'j√° tinha', 'costuma ter'],\n  leve: ['um pouco', 'levemente', '√†s vezes', 'suave']\n};\n\n/**\n * Fun√ß√£o principal de an√°lise da IA\n * @param {string} sintomas - Descri√ß√£o dos sintomas do paciente\n * @param {string} alergias - Informa√ß√µes sobre alergias\n * @param {string} intolerancia - Informa√ß√µes sobre intoler√¢ncias\n * @param {boolean} temAudio - Se foi fornecido √°udio (aumenta confiabilidade)\n * @returns {Object} Resultado da an√°lise com prioridade e detalhes\n */\nexport function analisarTriagemIA(sintomas, alergias = '', intolerancia = '', temAudio = false) {\n  // Normaliza o texto para an√°lise\n  const textoCompleto = `${sintomas} ${alergias} ${intolerancia}`.toLowerCase();\n\n  // Inicializa pontua√ß√£o para cada n√≠vel\n  let pontuacao = {\n    vermelho: 0,\n    laranja: 0,\n    amarelo: 0,\n    verde: 0,\n    azul: 0\n  };\n\n  // An√°lise por palavras-chave\n  Object.keys(PALAVRAS_CHAVE).forEach(nivel => {\n    PALAVRAS_CHAVE[nivel].forEach(palavra => {\n      if (textoCompleto.includes(palavra)) {\n        // Pontua√ß√£o base pela palavra-chave\n        pontuacao[nivel] += NIVEIS_PRIORIDADE[nivel.toUpperCase()].peso;\n\n        // B√¥nus se a palavra aparece m√∫ltiplas vezes\n        const ocorrencias = (textoCompleto.match(new RegExp(palavra, 'g')) || []).length;\n        if (ocorrencias > 1) {\n          pontuacao[nivel] += (ocorrencias - 1) * 0.5;\n        }\n      }\n    });\n  });\n\n  // Aplicar modificadores\n  aplicarModificadores(textoCompleto, pontuacao);\n\n  // B√¥nus por ter √°udio (indica mais detalhamento)\n  if (temAudio) {\n    // Aumenta levemente a confiabilidade, mas n√£o altera drasticamente a prioridade\n    Object.keys(pontuacao).forEach(nivel => {\n      if (pontuacao[nivel] > 0) {\n        pontuacao[nivel] += 0.2;\n      }\n    });\n  }\n\n  // Determina o n√≠vel de prioridade\n  const nivelDeterminado = determinarNivelFinal(pontuacao, textoCompleto);\n\n  // Gera explica√ß√£o da an√°lise\n  const explicacao = gerarExplicacao(nivelDeterminado, pontuacao, textoCompleto);\n  return {\n    prioridade: nivelDeterminado.cor,\n    nivel: nivelDeterminado,\n    pontuacao,\n    explicacao,\n    confiabilidade: calcularConfiabilidade(pontuacao, textoCompleto.length, temAudio),\n    recomendacoes: gerarRecomendacoes(nivelDeterminado, textoCompleto)\n  };\n}\n\n/**\n * Aplica modificadores que podem alterar a urg√™ncia\n */\nfunction aplicarModificadores(texto, pontuacao) {\n  // REGRA ESPECIAL: Fraturas sempre s√£o pelo menos LARANJA\n  const fraturas = ['quebrada', 'quebrado', 'quebrou', 'fratura', 'osso quebrado'];\n  const temFratura = fraturas.some(palavra => texto.includes(palavra));\n  if (temFratura) {\n    // Garante que fraturas tenham no m√≠nimo pontua√ß√£o laranja alta\n    pontuacao.laranja = Math.max(pontuacao.laranja, 8);\n    // Reduz drasticamente n√≠veis menores\n    pontuacao.verde *= 0.1;\n    pontuacao.azul *= 0.05;\n  }\n\n  // Modificadores que aumentam urg√™ncia\n  MODIFICADORES.idade_critica.forEach(mod => {\n    if (texto.includes(mod)) {\n      pontuacao.vermelho += 1;\n      pontuacao.laranja += 0.5;\n    }\n  });\n  MODIFICADORES.tempo_critico.forEach(mod => {\n    if (texto.includes(mod)) {\n      pontuacao.vermelho += 0.5;\n      pontuacao.laranja += 0.3;\n    }\n  });\n  MODIFICADORES.intensidade.forEach(mod => {\n    if (texto.includes(mod)) {\n      pontuacao.vermelho += 0.3;\n      pontuacao.laranja += 0.5;\n      pontuacao.amarelo += 0.2;\n    }\n  });\n\n  // Modificadores que diminuem urg√™ncia (mas n√£o para fraturas)\n  if (!temFratura) {\n    MODIFICADORES.cronico.forEach(mod => {\n      if (texto.includes(mod)) {\n        pontuacao.vermelho *= 0.5;\n        pontuacao.laranja *= 0.7;\n        pontuacao.amarelo *= 0.9;\n        pontuacao.verde += 0.5;\n        pontuacao.azul += 0.3;\n      }\n    });\n    MODIFICADORES.leve.forEach(mod => {\n      if (texto.includes(mod)) {\n        pontuacao.vermelho *= 0.3;\n        pontuacao.laranja *= 0.5;\n        pontuacao.verde += 0.3;\n        pontuacao.azul += 0.5;\n      }\n    });\n  }\n}\n\n/**\n * Determina o n√≠vel final baseado na pontua√ß√£o\n */\nfunction determinarNivelFinal(pontuacao, texto) {\n  // Encontra o n√≠vel com maior pontua√ß√£o\n  let maiorPontuacao = 0;\n  let nivelEscolhido = 'azul';\n  Object.keys(pontuacao).forEach(nivel => {\n    if (pontuacao[nivel] > maiorPontuacao) {\n      maiorPontuacao = pontuacao[nivel];\n      nivelEscolhido = nivel;\n    }\n  });\n\n  // Regras de seguran√ßa - se n√£o h√° sintomas claros, assume n√£o urgente\n  if (maiorPontuacao === 0 || texto.trim().length < 10) {\n    nivelEscolhido = 'azul';\n  }\n\n  // Regra de precau√ß√£o - se h√° m√∫ltiplos indicadores de urg√™ncia\n  if (pontuacao.vermelho > 1 && pontuacao.laranja > 1) {\n    nivelEscolhido = 'vermelho';\n  }\n  return NIVEIS_PRIORIDADE[nivelEscolhido.toUpperCase()];\n}\n\n/**\n * Calcula a confiabilidade da an√°lise\n */\nfunction calcularConfiabilidade(pontuacao, tamanhoTexto, temAudio) {\n  const somaPontuacao = Object.values(pontuacao).reduce((a, b) => a + b, 0);\n  const detalhamento = Math.min(tamanhoTexto / 100, 1); // 0 a 1\n  const audioBonus = temAudio ? 0.1 : 0;\n  let confiabilidade = somaPontuacao / 10 + detalhamento + audioBonus;\n  return Math.min(Math.max(confiabilidade, 0.3), 0.95); // Entre 30% e 95%\n}\n\n/**\n * Gera explica√ß√£o da an√°lise para transpar√™ncia\n */\nfunction gerarExplicacao(nivel, pontuacao, texto) {\n  const indicadores = [];\n\n  // Identifica os principais indicadores encontrados\n  Object.keys(PALAVRAS_CHAVE).forEach(nivelNome => {\n    PALAVRAS_CHAVE[nivelNome].forEach(palavra => {\n      if (texto.includes(palavra) && pontuacao[nivelNome] > 0) {\n        indicadores.push(`\"${palavra}\" (${nivelNome})`);\n      }\n    });\n  });\n  return {\n    nivelDeterminado: `${nivel.cor.toUpperCase()} - ${nivel.significado}`,\n    principais_indicadores: indicadores.slice(0, 5),\n    // Top 5\n    tempo_atendimento: nivel.tempo,\n    justificativa: `Baseado na an√°lise dos sintomas, foram identificados indicadores de prioridade ${nivel.cor}.`\n  };\n}\n\n/**\n * Gera recomenda√ß√µes espec√≠ficas baseadas no n√≠vel\n */\nfunction gerarRecomendacoes(nivel, texto) {\n  const recomendacoes = [];\n  switch (nivel.cor) {\n    case 'vermelho':\n      recomendacoes.push('üö® PROCURE ATENDIMENTO IMEDIATO');\n      recomendacoes.push('üè• Dirija-se ao pronto-socorro agora');\n      recomendacoes.push('üìû Considere chamar ambul√¢ncia (SAMU 192)');\n      recomendacoes.push('‚ö†Ô∏è N√£o dirija sozinho se poss√≠vel');\n      break;\n    case 'laranja':\n      recomendacoes.push('üè• Procure atendimento m√©dico urgente');\n      recomendacoes.push('‚è∞ N√£o aguarde mais de 10 minutos');\n      recomendacoes.push('üì± Mantenha contato com familiar/respons√°vel');\n      break;\n    case 'amarelo':\n      recomendacoes.push('üè• Procure atendimento m√©dico');\n      recomendacoes.push('‚è∞ Atendimento em at√© 50 minutos');\n      recomendacoes.push('üíä Evite medica√ß√£o por conta pr√≥pria');\n      break;\n    case 'verde':\n      recomendacoes.push('üè• Atendimento m√©dico recomendado');\n      recomendacoes.push('‚è∞ Aguarde atendimento em at√© 2 horas');\n      recomendacoes.push('üíß Mantenha-se hidratado');\n      recomendacoes.push('üòå Permane√ßa calmo e descanse');\n      break;\n    case 'azul':\n      recomendacoes.push('üìã Atendimento n√£o urgente');\n      recomendacoes.push('üìÖ Pode agendar consulta');\n      recomendacoes.push('üí° Considere cuidados caseiros apropriados');\n      break;\n  }\n  return recomendacoes;\n}\n\n// Fun√ß√£o auxiliar para formatar tempo\nexport function formatarTempo(tempoEstimado) {\n  if (tempoEstimado === '00:00') return 'Imediato';\n  if (tempoEstimado.includes(':')) {\n    const [horas, minutos] = tempoEstimado.split(':').map(Number);\n    if (horas > 0) {\n      return `${horas}h${minutos > 0 ? ` ${minutos}min` : ''}`;\n    }\n    return `${minutos} min`;\n  }\n  return tempoEstimado;\n}\n\n// Exporta cores para uso nos componentes\nexport const CORES_PRIORIDADE = {\n  vermelho: '#d13636',\n  laranja: '#ff6b35',\n  amarelo: '#ffc107',\n  verde: '#28a745',\n  azul: '#007bff'\n};","map":{"version":3,"names":["NIVEIS_PRIORIDADE","VERMELHO","cor","significado","tempo","tempoEstimado","exemplo","peso","LARANJA","AMARELO","VERDE","AZUL","PALAVRAS_CHAVE","vermelho","laranja","amarelo","verde","azul","MODIFICADORES","idade_critica","tempo_critico","intensidade","cronico","leve","analisarTriagemIA","sintomas","alergias","intolerancia","temAudio","textoCompleto","toLowerCase","pontuacao","Object","keys","forEach","nivel","palavra","includes","toUpperCase","ocorrencias","match","RegExp","length","aplicarModificadores","nivelDeterminado","determinarNivelFinal","explicacao","gerarExplicacao","prioridade","confiabilidade","calcularConfiabilidade","recomendacoes","gerarRecomendacoes","texto","fraturas","temFratura","some","Math","max","mod","maiorPontuacao","nivelEscolhido","trim","tamanhoTexto","somaPontuacao","values","reduce","a","b","detalhamento","min","audioBonus","indicadores","nivelNome","push","principais_indicadores","slice","tempo_atendimento","justificativa","formatarTempo","horas","minutos","split","map","Number","CORES_PRIORIDADE"],"sources":["/home/gustavo/code/pulsafe/src/utils/triagemAI.js"],"sourcesContent":["/**\n * Sistema de IA para Triagem M√©dica\n * Baseado no Sistema Manchester de Classifica√ß√£o de Risco\n * 5 n√≠veis de prioridade conforme protocolo hospitalar\n */\n\n// Defini√ß√£o dos n√≠veis de prioridade\nexport const NIVEIS_PRIORIDADE = {\n  VERMELHO: {\n    cor: 'vermelho',\n    significado: 'Emerg√™ncia absoluta',\n    tempo: 'Imediato',\n    tempoEstimado: '00:00',\n    exemplo: 'Parada card√≠aca, falta de ar grave, sangramento intenso, perda de consci√™ncia',\n    peso: 5\n  },\n  LARANJA: {\n    cor: 'laranja',\n    significado: 'Muito urgente',\n    tempo: 'At√© 10 min',\n    tempoEstimado: '10:00',\n    exemplo: 'Dor no peito forte, AVC em andamento, fratura exposta, queimadura grave',\n    peso: 4\n  },\n  AMARELO: {\n    cor: 'amarelo',\n    significado: 'Urgente moderado',\n    tempo: 'At√© 50 min',\n    tempoEstimado: '50:00',\n    exemplo: 'Febre alta com mal-estar, dor intensa mas est√°vel, pequenos cortes com sangramento controlado',\n    peso: 3\n  },\n  VERDE: {\n    cor: 'verde',\n    significado: 'Pouco urgente',\n    tempo: 'At√© 2 horas',\n    tempoEstimado: '120:00',\n    exemplo: 'Dor leve, sintomas gripais, pequenas tor√ß√µes',\n    peso: 2\n  },\n  AZUL: {\n    cor: 'azul',\n    significado: 'N√£o urgente',\n    tempo: 'At√© 4 horas',\n    tempoEstimado: '240:00',\n    exemplo: 'Pedido de receita, curativo simples, consulta de acompanhamento',\n    peso: 1\n  }\n};\n\n// Palavras-chave categorizadas por n√≠vel de emerg√™ncia\nconst PALAVRAS_CHAVE = {\n  // VERMELHO - Emerg√™ncia absoluta\n  vermelho: [\n    // Cardiovascular cr√≠tico\n    'parada card√≠aca', 'infarto', 'infarto agudo', 'dor no peito irradiando', 'dor no bra√ßo esquerdo',\n    'press√£o no peito', 'aperto no peito', 'queima√ß√£o no peito forte',\n    \n    // Respirat√≥rio cr√≠tico\n    'falta de ar grave', 'n√£o consigo respirar', 'sufocando', 'cianose', 'l√°bios roxos',\n    'chiado forte', 'respira√ß√£o dif√≠cil', 'engasgando',\n    \n    // Neurol√≥gico cr√≠tico\n    'desmaio', 'desmaiou', 'perda de consci√™ncia', 'inconsciente', 'convuls√£o',\n    'confus√£o mental severa', 'n√£o responde', 'avc', 'derrame',\n    \n    // Sangramento grave\n    'sangramento intenso', 'muito sangue', 'hemorragia', 'sangue n√£o para',\n    'vomitando sangue', 'sangue na urina escuro', 'sangue nas fezes escuro',\n    \n    // Trauma grave\n    'acidente grave', 'atropelado', 'quedou de altura', 'fratura exposta',\n    'osso aparecendo', 'traumatismo craniano', 'cabe√ßa bateu forte',\n    \n    // Intoxica√ß√£o\n    'envenenamento', 'intoxica√ß√£o', 'overdose', 'tomei muitos rem√©dios',\n    \n    // Queimaduras graves\n    'queimadura extensa', 'queimou muito', 'queimadura qu√≠mica',\n    \n    // Pedi√°trico cr√≠tico\n    'beb√™ n√£o responde', 'crian√ßa azul', 'febre muito alta beb√™'\n  ],\n\n  // LARANJA - Muito urgente\n  laranja: [\n    // Dor intensa\n    'dor no peito', 'dor forte peito', 'dor intensa', 'dor insuport√°vel',\n    'dor 8', 'dor 9', 'dor 10', 'dor muito forte',\n    \n    // Neurol√≥gico urgente\n    'dor de cabe√ßa forte', 'enxaqueca severa', 'vis√£o emba√ßada s√∫bita',\n    'formigamento', 'dorm√™ncia s√∫bita', 'tontura forte',\n    \n    // Respirat√≥rio urgente\n    'falta de ar', 'cansa√ßo para respirar', 'chiado no peito',\n    'tosse com sangue', 'escarro com sangue',\n    \n    // Gastrointestinal urgente\n    'dor abdominal forte', 'v√¥mito com sangue', 'dor barriga intensa',\n    'n√£o consigo urinar', 'muita dor urinar',\n    \n    // Trauma ortop√©dico - CORRIGIDO\n    'fratura', 'osso quebrado', 'quebrou', 'quebrada', 'quebrado', 'osso quebrou',\n    'perna quebrada', 'bra√ßo quebrado', 'm√£o quebrada', 'p√© quebrado',\n    'tornozelo quebrado', 'pulso quebrado', 'costela quebrada',\n    'tor√ß√£o grave', 'luxa√ß√£o', 'deslocamento', 'osso saiu do lugar',\n    'corte profundo', 'sangramento moderado', 'machucado grave',\n    'acidente de moto', 'acidente de carro', 'queda de altura',\n    'n√£o consigo movimentar', 'n√£o consigo andar', 'n√£o consigo mexer',\n    \n    // Infec√ß√£o grave\n    'febre alta', 'febre 39', 'febre 40', 'calafrios intensos',\n    'infec√ß√£o grave', 'vermelhid√£o espalhando',\n    \n    // Oftalmol√≥gico urgente\n    'dor no olho forte', 'perda de vis√£o s√∫bita', 'objeto no olho'\n  ],\n\n  // AMARELO - Urgente moderado\n  amarelo: [\n    // Dor moderada\n    'dor moderada', 'dor 5', 'dor 6', 'dor 7', 'dor que incomoda',\n    'dor nas costas forte', 'dor muscular intensa',\n    \n    // Gastrointestinal\n    'v√¥mito', 'vomitando', 'n√°usea forte', 'diarreia', 'dor de barriga',\n    'azia forte', 'queima√ß√£o est√¥mago',\n    \n    // Respirat√≥rio moderado\n    'tosse persistente', 'tosse seca forte', 'garganta muito dolorida',\n    \n    // Febre\n    'febre', 'febril', 'temperatura alta', 'calafrios',\n    \n    // Urin√°rio\n    'dor para urinar', 'sangue na urina', 'n√£o consegue urinar bem',\n    \n    // Dermatol√≥gico\n    'coceira intensa', 'alergia na pele', 'incha√ßo', 'vermelhid√£o',\n    \n    // Ortop√©dico moderado\n    'tor√ß√£o', 'entorse', 'dor articular forte', 'machucado', 'machucou',\n    'bati a perna', 'bati o bra√ßo', 'ca√≠', 'cai', 'queda', 'trope√ßou',\n    'perna doendo muito', 'bra√ßo doendo muito', 'incha√ßo grande',\n    'roxo', 'hematoma', 'n√£o consigo apoiar', 'mancando'\n  ],\n\n  // VERDE - Pouco urgente\n  verde: [\n    // Dor leve\n    'dor leve', 'dor 3', 'dor 4', 'desconforto', 'inc√¥modo',\n    \n    // Sintomas gripais\n    'gripe', 'resfriado', 'coriza', 'espirro', 'tosse leve',\n    'garganta dolorida', 'mal estar',\n    \n    // Gastrointestinal leve\n    'azia', 'queima√ß√£o leve', 'gases', 'pris√£o de ventre',\n    \n    // Dermatol√≥gico leve\n    'coceira', 'mancha na pele', 'espinha', 'caspa',\n    \n    // Ortop√©dico leve\n    'dor nas costas leve', 'tens√£o muscular', 'cansa√ßo'\n  ],\n\n  // AZUL - N√£o urgente\n  azul: [\n    // Administrativo\n    'receita', 'atestado', 'exame de rotina', 'consulta agendada',\n    'acompanhamento', 'resultado de exame',\n    \n    // Preven√ß√£o\n    'vacina', 'check-up', 'preven√ß√£o', 'orienta√ß√£o',\n    \n    // Sintomas muito leves\n    'dor 1', 'dor 2', 'dor muito leve', 'leve desconforto'\n  ]\n};\n\n// Modificadores que podem alterar a prioridade\nconst MODIFICADORES = {\n  // Aumentam urg√™ncia\n  idade_critica: ['beb√™', 'rec√©m-nascido', 'idoso', 'gestante', 'gr√°vida'],\n  tempo_critico: ['s√∫bito', 'repentino', 'agora', 'de repente', 'come√ßou agora'],\n  intensidade: ['muito', 'extremamente', 'insuport√°vel', 'terr√≠vel', 'horr√≠vel'],\n  \n  // Diminuem urg√™ncia\n  cronico: ['sempre', 'h√° muito tempo', 'cr√¥nico', 'j√° tinha', 'costuma ter'],\n  leve: ['um pouco', 'levemente', '√†s vezes', 'suave']\n};\n\n/**\n * Fun√ß√£o principal de an√°lise da IA\n * @param {string} sintomas - Descri√ß√£o dos sintomas do paciente\n * @param {string} alergias - Informa√ß√µes sobre alergias\n * @param {string} intolerancia - Informa√ß√µes sobre intoler√¢ncias\n * @param {boolean} temAudio - Se foi fornecido √°udio (aumenta confiabilidade)\n * @returns {Object} Resultado da an√°lise com prioridade e detalhes\n */\nexport function analisarTriagemIA(sintomas, alergias = '', intolerancia = '', temAudio = false) {\n  // Normaliza o texto para an√°lise\n  const textoCompleto = `${sintomas} ${alergias} ${intolerancia}`.toLowerCase();\n  \n  // Inicializa pontua√ß√£o para cada n√≠vel\n  let pontuacao = {\n    vermelho: 0,\n    laranja: 0,\n    amarelo: 0,\n    verde: 0,\n    azul: 0\n  };\n\n  // An√°lise por palavras-chave\n  Object.keys(PALAVRAS_CHAVE).forEach(nivel => {\n    PALAVRAS_CHAVE[nivel].forEach(palavra => {\n      if (textoCompleto.includes(palavra)) {\n        // Pontua√ß√£o base pela palavra-chave\n        pontuacao[nivel] += NIVEIS_PRIORIDADE[nivel.toUpperCase()].peso;\n        \n        // B√¥nus se a palavra aparece m√∫ltiplas vezes\n        const ocorrencias = (textoCompleto.match(new RegExp(palavra, 'g')) || []).length;\n        if (ocorrencias > 1) {\n          pontuacao[nivel] += (ocorrencias - 1) * 0.5;\n        }\n      }\n    });\n  });\n\n  // Aplicar modificadores\n  aplicarModificadores(textoCompleto, pontuacao);\n\n  // B√¥nus por ter √°udio (indica mais detalhamento)\n  if (temAudio) {\n    // Aumenta levemente a confiabilidade, mas n√£o altera drasticamente a prioridade\n    Object.keys(pontuacao).forEach(nivel => {\n      if (pontuacao[nivel] > 0) {\n        pontuacao[nivel] += 0.2;\n      }\n    });\n  }\n\n  // Determina o n√≠vel de prioridade\n  const nivelDeterminado = determinarNivelFinal(pontuacao, textoCompleto);\n  \n  // Gera explica√ß√£o da an√°lise\n  const explicacao = gerarExplicacao(nivelDeterminado, pontuacao, textoCompleto);\n  \n  return {\n    prioridade: nivelDeterminado.cor,\n    nivel: nivelDeterminado,\n    pontuacao,\n    explicacao,\n    confiabilidade: calcularConfiabilidade(pontuacao, textoCompleto.length, temAudio),\n    recomendacoes: gerarRecomendacoes(nivelDeterminado, textoCompleto)\n  };\n}\n\n/**\n * Aplica modificadores que podem alterar a urg√™ncia\n */\nfunction aplicarModificadores(texto, pontuacao) {\n  // REGRA ESPECIAL: Fraturas sempre s√£o pelo menos LARANJA\n  const fraturas = ['quebrada', 'quebrado', 'quebrou', 'fratura', 'osso quebrado'];\n  const temFratura = fraturas.some(palavra => texto.includes(palavra));\n  \n  if (temFratura) {\n    // Garante que fraturas tenham no m√≠nimo pontua√ß√£o laranja alta\n    pontuacao.laranja = Math.max(pontuacao.laranja, 8);\n    // Reduz drasticamente n√≠veis menores\n    pontuacao.verde *= 0.1;\n    pontuacao.azul *= 0.05;\n  }\n\n  // Modificadores que aumentam urg√™ncia\n  MODIFICADORES.idade_critica.forEach(mod => {\n    if (texto.includes(mod)) {\n      pontuacao.vermelho += 1;\n      pontuacao.laranja += 0.5;\n    }\n  });\n\n  MODIFICADORES.tempo_critico.forEach(mod => {\n    if (texto.includes(mod)) {\n      pontuacao.vermelho += 0.5;\n      pontuacao.laranja += 0.3;\n    }\n  });\n\n  MODIFICADORES.intensidade.forEach(mod => {\n    if (texto.includes(mod)) {\n      pontuacao.vermelho += 0.3;\n      pontuacao.laranja += 0.5;\n      pontuacao.amarelo += 0.2;\n    }\n  });\n\n  // Modificadores que diminuem urg√™ncia (mas n√£o para fraturas)\n  if (!temFratura) {\n    MODIFICADORES.cronico.forEach(mod => {\n      if (texto.includes(mod)) {\n        pontuacao.vermelho *= 0.5;\n        pontuacao.laranja *= 0.7;\n        pontuacao.amarelo *= 0.9;\n        pontuacao.verde += 0.5;\n        pontuacao.azul += 0.3;\n      }\n    });\n\n    MODIFICADORES.leve.forEach(mod => {\n      if (texto.includes(mod)) {\n        pontuacao.vermelho *= 0.3;\n        pontuacao.laranja *= 0.5;\n        pontuacao.verde += 0.3;\n        pontuacao.azul += 0.5;\n      }\n    });\n  }\n}\n\n/**\n * Determina o n√≠vel final baseado na pontua√ß√£o\n */\nfunction determinarNivelFinal(pontuacao, texto) {\n  // Encontra o n√≠vel com maior pontua√ß√£o\n  let maiorPontuacao = 0;\n  let nivelEscolhido = 'azul';\n\n  Object.keys(pontuacao).forEach(nivel => {\n    if (pontuacao[nivel] > maiorPontuacao) {\n      maiorPontuacao = pontuacao[nivel];\n      nivelEscolhido = nivel;\n    }\n  });\n\n  // Regras de seguran√ßa - se n√£o h√° sintomas claros, assume n√£o urgente\n  if (maiorPontuacao === 0 || texto.trim().length < 10) {\n    nivelEscolhido = 'azul';\n  }\n\n  // Regra de precau√ß√£o - se h√° m√∫ltiplos indicadores de urg√™ncia\n  if (pontuacao.vermelho > 1 && pontuacao.laranja > 1) {\n    nivelEscolhido = 'vermelho';\n  }\n\n  return NIVEIS_PRIORIDADE[nivelEscolhido.toUpperCase()];\n}\n\n/**\n * Calcula a confiabilidade da an√°lise\n */\nfunction calcularConfiabilidade(pontuacao, tamanhoTexto, temAudio) {\n  const somaPontuacao = Object.values(pontuacao).reduce((a, b) => a + b, 0);\n  const detalhamento = Math.min(tamanhoTexto / 100, 1); // 0 a 1\n  const audioBonus = temAudio ? 0.1 : 0;\n  \n  let confiabilidade = (somaPontuacao / 10) + detalhamento + audioBonus;\n  return Math.min(Math.max(confiabilidade, 0.3), 0.95); // Entre 30% e 95%\n}\n\n/**\n * Gera explica√ß√£o da an√°lise para transpar√™ncia\n */\nfunction gerarExplicacao(nivel, pontuacao, texto) {\n  const indicadores = [];\n  \n  // Identifica os principais indicadores encontrados\n  Object.keys(PALAVRAS_CHAVE).forEach(nivelNome => {\n    PALAVRAS_CHAVE[nivelNome].forEach(palavra => {\n      if (texto.includes(palavra) && pontuacao[nivelNome] > 0) {\n        indicadores.push(`\"${palavra}\" (${nivelNome})`);\n      }\n    });\n  });\n\n  return {\n    nivelDeterminado: `${nivel.cor.toUpperCase()} - ${nivel.significado}`,\n    principais_indicadores: indicadores.slice(0, 5), // Top 5\n    tempo_atendimento: nivel.tempo,\n    justificativa: `Baseado na an√°lise dos sintomas, foram identificados indicadores de prioridade ${nivel.cor}.`\n  };\n}\n\n/**\n * Gera recomenda√ß√µes espec√≠ficas baseadas no n√≠vel\n */\nfunction gerarRecomendacoes(nivel, texto) {\n  const recomendacoes = [];\n\n  switch (nivel.cor) {\n    case 'vermelho':\n      recomendacoes.push('üö® PROCURE ATENDIMENTO IMEDIATO');\n      recomendacoes.push('üè• Dirija-se ao pronto-socorro agora');\n      recomendacoes.push('üìû Considere chamar ambul√¢ncia (SAMU 192)');\n      recomendacoes.push('‚ö†Ô∏è N√£o dirija sozinho se poss√≠vel');\n      break;\n      \n    case 'laranja':\n      recomendacoes.push('üè• Procure atendimento m√©dico urgente');\n      recomendacoes.push('‚è∞ N√£o aguarde mais de 10 minutos');\n      recomendacoes.push('üì± Mantenha contato com familiar/respons√°vel');\n      break;\n      \n    case 'amarelo':\n      recomendacoes.push('üè• Procure atendimento m√©dico');\n      recomendacoes.push('‚è∞ Atendimento em at√© 50 minutos');\n      recomendacoes.push('üíä Evite medica√ß√£o por conta pr√≥pria');\n      break;\n      \n    case 'verde':\n      recomendacoes.push('üè• Atendimento m√©dico recomendado');\n      recomendacoes.push('‚è∞ Aguarde atendimento em at√© 2 horas');\n      recomendacoes.push('üíß Mantenha-se hidratado');\n      recomendacoes.push('üòå Permane√ßa calmo e descanse');\n      break;\n      \n    case 'azul':\n      recomendacoes.push('üìã Atendimento n√£o urgente');\n      recomendacoes.push('üìÖ Pode agendar consulta');\n      recomendacoes.push('üí° Considere cuidados caseiros apropriados');\n      break;\n  }\n\n  return recomendacoes;\n}\n\n// Fun√ß√£o auxiliar para formatar tempo\nexport function formatarTempo(tempoEstimado) {\n  if (tempoEstimado === '00:00') return 'Imediato';\n  if (tempoEstimado.includes(':')) {\n    const [horas, minutos] = tempoEstimado.split(':').map(Number);\n    if (horas > 0) {\n      return `${horas}h${minutos > 0 ? ` ${minutos}min` : ''}`;\n    }\n    return `${minutos} min`;\n  }\n  return tempoEstimado;\n}\n\n// Exporta cores para uso nos componentes\nexport const CORES_PRIORIDADE = {\n  vermelho: '#d13636',\n  laranja: '#ff6b35',\n  amarelo: '#ffc107',\n  verde: '#28a745',\n  azul: '#007bff'\n};"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}